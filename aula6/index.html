<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aula 6: Negocia√ß√µes Financeiras de Alto Impacto - Revolu√ß√£o Financeira em 30 Dias</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.95;
        }

        .progress-container {
            background: #f8f9fa;
            padding: 20px 40px;
            border-bottom: 2px solid #e9ecef;
        }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin-bottom: 10px;
        }

        .progress-line {
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 4px;
            background: #e9ecef;
            z-index: 1;
        }

        .progress-line-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
            width: 0%;
        }

        .progress-step {
            position: relative;
            z-index: 2;
            text-align: center;
            flex: 1;
        }

        .progress-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            border: 4px solid #e9ecef;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #adb5bd;
            transition: all 0.3s ease;
        }

        .progress-step.active .progress-circle {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: scale(1.1);
        }

        .progress-step.completed .progress-circle {
            border-color: #28a745;
            background: #28a745;
            color: white;
        }

        .progress-label {
            font-size: 0.85em;
            color: #6c757d;
            font-weight: 500;
        }

        .progress-step.active .progress-label {
            color: #667eea;
            font-weight: 600;
        }

        .content {
            padding: 40px;
        }

        .step {
            display: none;
        }

        .step.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .step-title {
            font-size: 2em;
            color: #2d3748;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .step-description {
            color: #718096;
            margin-bottom: 30px;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 1.3em;
            color: #667eea;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .info-box {
            background: #e0e7ff;
            border-left: 4px solid #667eea;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .info-box p {
            color: #4c51bf;
            margin: 5px 0;
            line-height: 1.6;
        }

        .info-box strong {
            color: #667eea;
        }

        .success-box {
            background: #d1fae5;
            border-left: 4px solid #10b981;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .success-box p {
            color: #065f46;
            margin: 5px 0;
            line-height: 1.6;
        }

        .warning-box {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .warning-box p {
            color: #92400e;
            margin: 5px 0;
            line-height: 1.6;
        }

        .target-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #e2e8f0;
        }

        .target-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }

        .target-card.selected {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .target-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .target-name {
            font-size: 1.2em;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .target-stats {
            font-size: 0.85em;
            color: #667eea;
            margin-top: 10px;
        }

        .script-box {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 5px solid #10b981;
        }

        .script-title {
            font-size: 1.3em;
            color: #2d3748;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .script-content {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            font-size: 1em;
            line-height: 1.8;
            color: #4a5568;
            border: 2px dashed #cbd5e0;
            position: relative;
        }

        .copy-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 0.85em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .copy-button:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        .tip-box {
            background: #fff7ed;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .tip-box p {
            color: #92400e;
            margin: 5px 0;
            line-height: 1.6;
        }

        input[type="text"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        input[type="text"]:focus,
        input[type="number"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #4a5568;
            font-weight: 600;
            font-size: 0.95em;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 15px;
        }

        .nav-button {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
        }

        .nav-button.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .nav-button.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .nav-button.secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .nav-button.secondary:hover {
            background: #f0f4ff;
        }

        .negotiation-item {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 5px solid #10b981;
        }

        .savings-summary {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            border: 3px solid #10b981;
            text-align: center;
        }

        .summary-title {
            font-size: 1.8em;
            color: #065f46;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .summary-value {
            font-size: 3.5em;
            font-weight: 700;
            color: #059669;
            margin: 20px 0;
        }

        .download-section {
            text-align: center;
            margin-top: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .download-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 8px;
            font-size: 1.2em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .download-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .print-view {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            z-index: 9999;
            overflow-y: auto;
            padding: 40px;
        }

        .print-view.active {
            display: block !important;
        }

        .print-content {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        .print-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .print-buttons {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 10000;
        }
        
        .print-view:not(.active) .print-buttons {
            display: none;
        }
        
        .print-view.active .print-buttons {
            display: flex !important;
        }

        .print-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .print-btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .print-btn-secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .print-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        @media print {
            .print-buttons {
                display: none !important;
            }
            
            .print-content {
                box-shadow: none;
                padding: 0;
            }
            
            .print-view {
                padding: 0;
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üí∞ Aula 6: Negocia√ß√µes Financeiras de Alto Impacto</h1>
            <p>Libere recursos significativos com conversas estrat√©gicas</p>
        </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-line">
                    <div class="progress-line-fill" id="progressFill"></div>
                </div>
                <div class="progress-step active" data-step="1">
                    <div class="progress-circle">1</div>
                    <div class="progress-label">Alvos</div>
                </div>
                <div class="progress-step" data-step="2">
                    <div class="progress-circle">2</div>
                    <div class="progress-label">Prepara√ß√£o</div>
                </div>
                <div class="progress-step" data-step="3">
                    <div class="progress-circle">3</div>
                    <div class="progress-label">Negocia√ß√£o</div>
                </div>
                <div class="progress-step" data-step="4">
                    <div class="progress-circle">4</div>
                    <div class="progress-label">Resultados</div>
                </div>
            </div>
        </div>

        <div class="content">
            <!-- PASSO 1: IDENTIFICAR ALVOS -->
            <div class="step active" id="step1">
                <h2 class="step-title">üéØ Passo 1: Identifique Seus Alvos de Negocia√ß√£o</h2>
                <p class="step-description">Escolha os 3 servi√ßos com maior potencial de economia.</p>

                <div class="info-box">
                    <p><strong>üí° O Poder das Negocia√ß√µes:</strong></p>
                    <p>‚Ä¢ Brasileiros que negociam economizam em m√©dia <strong>23%</strong></p>
                    <p>‚Ä¢ Taxa de sucesso em renegocia√ß√µes: <strong>82%</strong></p>
                    <p>‚Ä¢ Potencial de economia anual: <strong>R$ 1.200 a R$ 3.600</strong></p>
                    <p>‚Ä¢ Apenas <strong>12%</strong> dos brasileiros tentam negociar regularmente</p>
                </div>

                <div class="warning-box">
                    <p><strong>‚ö†Ô∏è Setores Mais Rent√°veis para Negocia√ß√£o:</strong></p>
                    <p>üè¶ <strong>Servi√ßos Financeiros:</strong> 25-40% de economia (taxa de sucesso: 76%)</p>
                    <p>üì± <strong>Telecomunica√ß√µes:</strong> 15-35% de economia (taxa de sucesso: 82%)</p>
                </div>

                <div class="section">
                    <div class="section-title">Selecione 3 Servi√ßos para Negociar</div>
                    
                    <div style="display: grid; gap: 15px;">
                        <div class="target-card" onclick="toggleTarget('banco')">
                            <div class="target-icon">üè¶</div>
                            <div class="target-name">Servi√ßos Banc√°rios</div>
                            <p style="color: #718096; font-size: 0.9em;">Tarifas, anuidade de cart√£o, seguros</p>
                            <div class="target-stats">Economia m√©dia: 25-40% | Sucesso: 76%</div>
                        </div>

                        <div class="target-card" onclick="toggleTarget('celular')">
                            <div class="target-icon">üì±</div>
                            <div class="target-name">Plano de Celular</div>
                            <p style="color: #718096; font-size: 0.9em;">Operadora de telefonia m√≥vel</p>
                            <div class="target-stats">Economia m√©dia: 15-35% | Sucesso: 82%</div>
                        </div>

                        <div class="target-card" onclick="toggleTarget('internet')">
                            <div class="target-icon">üåê</div>
                            <div class="target-name">Internet/TV</div>
                            <p style="color: #718096; font-size: 0.9em;">Banda larga e TV por assinatura</p>
                            <div class="target-stats">Economia m√©dia: 15-30% | Sucesso: 80%</div>
                        </div>

                        <div class="target-card" onclick="toggleTarget('seguro')">
                            <div class="target-icon">üöó</div>
                            <div class="target-name">Seguros</div>
                            <p style="color: #718096; font-size: 0.9em;">Autom√≥vel, residencial, vida</p>
                            <div class="target-stats">Economia m√©dia: 12-18% | Sucesso: 68%</div>
                        </div>

                        <div class="target-card" onclick="toggleTarget('streaming')">
                            <div class="target-icon">üì∫</div>
                            <div class="target-name">Streaming/Assinaturas</div>
                            <p style="color: #718096; font-size: 0.9em;">Netflix, Spotify, outros servi√ßos</p>
                            <div class="target-stats">Economia m√©dia: 10-20% | Sucesso: 65%</div>
                        </div>

                        <div class="target-card" onclick="toggleTarget('academia')">
                            <div class="target-icon">üí™</div>
                            <div class="target-name">Academia/Clube</div>
                            <p style="color: #718096; font-size: 0.9em;">Mensalidades de academia ou clube</p>
                            <div class="target-stats">Economia m√©dia: 15-25% | Sucesso: 70%</div>
                        </div>
                    </div>

                    <div id="selectedTargetsInfo" style="margin-top: 20px;"></div>
                </div>

                <div class="navigation">
                    <button class="nav-button primary" onclick="nextStep()">
                        Pr√≥ximo: Preparar Negocia√ß√£o ‚Üí
                    </button>
                </div>
            </div>

            <!-- PASSO 2: PREPARA√á√ÉO -->
            <div class="step" id="step2">
                <h2 class="step-title">üìã Passo 2: Prepare Suas Negocia√ß√µes</h2>
                <p class="step-description">Para cada servi√ßo, registre informa√ß√µes e pesquise ofertas concorrentes.</p>

                <div class="info-box">
                    <p><strong>üí° A T√©cnica da Segunda Melhor Oferta:</strong></p>
                    <p>‚Ä¢ Pesquise ofertas de concorrentes (use sites comparadores)</p>
                    <p>‚Ä¢ Escolha a <strong>segunda melhor</strong> op√ß√£o (n√£o a mais barata)</p>
                    <p>‚Ä¢ Mencione especificamente essa oferta na negocia√ß√£o</p>
                    <p>‚Ä¢ Consumidores que usam essa t√©cnica t√™m <strong>73% mais chances</strong> de sucesso</p>
                </div>

                <div id="preparationContainer"></div>

                <div class="navigation">
                    <button class="nav-button secondary" onclick="prevStep()">
                        ‚Üê Voltar
                    </button>
                    <button class="nav-button primary" onclick="nextStep()">
                        Ver Scripts de Negocia√ß√£o ‚Üí
                    </button>
                </div>
            </div>

            <!-- PASSO 3: SCRIPTS -->
            <div class="step" id="step3">
                <h2 class="step-title">üìû Passo 3: Scripts Prontos para Negocia√ß√£o</h2>
                <p class="step-description">Use estes scripts testados para maximizar suas chances de sucesso.</p>

                <div class="warning-box">
                    <p><strong>‚ö†Ô∏è T√©cnicas Poderosas:</strong></p>
                    <p>üí¨ <strong>Sil√™ncio Estrat√©gico:</strong> Ap√≥s sua solicita√ß√£o, fique em sil√™ncio por 8-10 segundos</p>
                    <p>üéØ <strong>Mencione Portabilidade:</strong> Aumenta em 78% as chances de desconto</p>
                    <p>üìû <strong>Pe√ßa Supervisor:</strong> Se receber "n√£o", pe√ßa para falar com setor de reten√ß√£o</p>
                </div>

                <div id="scriptsContainer"></div>

                <div class="success-box">
                    <p><strong>‚úÖ Dicas para o Momento da Negocia√ß√£o:</strong></p>
                    <p>1. Mantenha tom <strong>amig√°vel mas firme</strong></p>
                    <p>2. Use a <strong>t√©cnica do sil√™ncio</strong> ap√≥s fazer solicita√ß√µes</p>
                    <p>3. Mencione que est√° <strong>considerando cancelar</strong> o servi√ßo</p>
                    <p>4. Registre <strong>nome do atendente e protocolo</strong></p>
                    <p>5. Se receber "n√£o", <strong>pe√ßa supervisor</strong> ou setor de reten√ß√£o</p>
                </div>

                <div class="navigation">
                    <button class="nav-button secondary" onclick="prevStep()">
                        ‚Üê Voltar
                    </button>
                    <button class="nav-button primary" onclick="nextStep()">
                        Registrar Resultados ‚Üí
                    </button>
                </div>
            </div>

            <!-- PASSO 4: RESULTADOS -->
            <div class="step" id="step4">
                <h2 class="step-title">üéâ Passo 4: Registre Seus Resultados</h2>
                <p class="step-description">Documente as economias obtidas e veja o impacto total.</p>

                <div id="resultsContainer"></div>

                <div id="totalSavings"></div>

                <div class="success-box">
                    <p><strong>‚úÖ Pr√≥ximos Passos:</strong></p>
                    <p>1. <strong>Configure transfer√™ncia autom√°tica</strong> da economia para Conta Sonhos</p>
                    <p>2. <strong>Agende lembretes</strong> para renegociar novamente em 12 meses</p>
                    <p>3. <strong>Compartilhe seu resultado</strong> para inspirar outros</p>
                    <p>4. <strong>Repita o processo</strong> com outros servi√ßos ap√≥s 30 dias</p>
                </div>

                <div class="download-section">
                    <h3 style="margin-bottom: 20px; color: #2d3748;">‚úÖ Economias Registradas!</h3>
                    <p style="color: #718096; margin-bottom: 30px;">Salve seu Relat√≥rio de Negocia√ß√µes</p>
                    <button class="download-button" onclick="showPrintView()">
                        üìÑ Ver Relat√≥rio Completo
                    </button>
                </div>

                <div class="navigation">
                    <button class="nav-button secondary" onclick="prevStep()">
                        ‚Üê Voltar
                    </button>
                    <button class="nav-button primary" onclick="restart()">
                        üîÑ Nova Rodada de Negocia√ß√µes
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Visualiza√ß√£o para Impress√£o -->
    <div class="print-view" id="printView">
        <div class="print-buttons">
            <button class="print-btn print-btn-primary" onclick="printReport()">üñ®Ô∏è Imprimir/Salvar PDF</button>
            <button class="print-btn print-btn-secondary" onclick="closePrintView()">‚úï Fechar</button>
        </div>
        <div class="print-content" id="printContent"></div>
    </div>

    <script>
        let currentStep = 1;
        let selectedTargets = [];
        let negotiations = {};

        const targetData = {
            banco: {
                name: 'Servi√ßos Banc√°rios',
                icon: 'üè¶',
                script: 'Bom dia. Sou cliente do banco h√° [TEMPO] e notei que estou pagando R$ [VALOR_ATUAL] pela manuten√ß√£o da minha conta/cart√£o. O [BANCO_CONCORRENTE] est√° oferecendo o mesmo pacote de servi√ßos por R$ [VALOR_CONCORRENTE] para novos clientes. Gostaria de continuar com voc√™s, mas essa diferen√ßa √© significativa para mim. O que voc√™s podem oferecer para que eu permane√ßa como cliente?',
                tips: 'Mencione seu tempo como cliente e hist√≥rico de pontualidade. Taxa de sucesso: 65% com economia m√©dia de R$ 35/m√™s.'
            },
            celular: {
                name: 'Plano de Celular',
                icon: 'üì±',
                script: 'Ol√°. Sou cliente h√° [TEMPO] e estou avaliando meus gastos mensais. Vi que a [OPERADORA_CONCORRENTE] est√° oferecendo um plano com [BENEF√çCIOS_SIMILARES] por R$ [VALOR_CONCORRENTE]. Gostaria de verificar se voc√™s podem igualar ou melhorar essa oferta, pois prefiro n√£o precisar trocar de operadora e passar pelo processo de portabilidade.',
                tips: '78% dos que mencionam portabilidade conseguem pelo menos 15% de desconto. Use comparadores como MelhorPlano.net'
            },
            internet: {
                name: 'Internet/TV',
                icon: 'üåê',
                script: 'Bom dia. Sou cliente h√° [TEMPO] pagando R$ [VALOR_ATUAL] por meu pacote de internet/TV. A [OPERADORA_CONCORRENTE] est√° oferecendo velocidade de [VELOCIDADE] e [CANAIS/BENEF√çCIOS] por R$ [VALOR_CONCORRENTE]. Gostaria de continuar com voc√™s pelo bom atendimento, mas preciso avaliar essa diferen√ßa. Voc√™s conseguem igualar ou melhorar essa oferta?',
                tips: 'Operadoras t√™m grande margem para negocia√ß√£o. Mencione qualidade do servi√ßo atual para refor√ßar que quer ficar.'
            },
            seguro: {
                name: 'Seguros',
                icon: 'üöó',
                script: 'Bom dia. Estou no per√≠odo de renova√ß√£o do meu seguro e recebi uma proposta da [SEGURADORA_CONCORRENTE] com cobertura similar por R$ [VALOR_CONCORRENTE]. Gostaria de continuar com voc√™s devido ao bom atendimento que sempre tive, mas o valor est√° pesando na minha decis√£o. Existe a possibilidade de reverem o valor da renova√ß√£o para que eu possa permanecer como cliente?',
                tips: 'Seguradoras t√™m margem de 12-18% em renova√ß√µes. Clientes sem sinistros t√™m mais poder de negocia√ß√£o.'
            },
            streaming: {
                name: 'Streaming/Assinaturas',
                icon: 'üì∫',
                script: 'Ol√°. Sou assinante h√° [TEMPO] e estou revisando meus gastos mensais. Vi que voc√™s t√™m planos promocionais para novos clientes por R$ [VALOR_PROMOCIONAL], enquanto pago R$ [VALOR_ATUAL]. Como cliente fiel, gostaria de saber se voc√™s podem oferecer condi√ß√µes similares para que eu continue assinando.',
                tips: 'Empresas de streaming frequentemente oferecem descontos para reten√ß√£o. Mencione planos promocionais.'
            },
            academia: {
                name: 'Academia/Clube',
                icon: 'üí™',
                script: 'Ol√°. Sou aluno h√° [TEMPO] e tenho sido ass√≠duo nas aulas. Estou revisando meus gastos e vi que a [ACADEMIA_CONCORRENTE] est√° oferecendo plano similar por R$ [VALOR_CONCORRENTE]. Gosto muito daqui e da estrutura, mas preciso considerar essa diferen√ßa. Existe alguma condi√ß√£o especial que voc√™s podem oferecer?',
                tips: 'Academias valorizam alunos ass√≠duos. Mencione sua frequ√™ncia e envolvimento. Negocie planos semestrais/anuais.'
            }
        };

        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            updateProgressBar();
            updateSelectedInfo();
        });

        function toggleTarget(target) {
            const index = selectedTargets.indexOf(target);
            if (index > -1) {
                selectedTargets.splice(index, 1);
            } else {
                if (selectedTargets.length >= 3) {
                    alert('Voc√™ j√° selecionou 3 alvos! Remova um para adicionar outro.');
                    return;
                }
                selectedTargets.push(target);
            }
            updateTargetUI();
            updateSelectedInfo();
            saveData();
        }

        function updateTargetUI() {
            document.querySelectorAll('.target-card').forEach(card => {
                card.classList.remove('selected');
            });
            selectedTargets.forEach(target => {
                const cards = document.querySelectorAll('.target-card');
                cards.forEach(card => {
                    if (card.textContent.includes(targetData[target].name)) {
                        card.classList.add('selected');
                    }
                });
            });
        }

        function updateSelectedInfo() {
            const info = document.getElementById('selectedTargetsInfo');
            if (selectedTargets.length === 0) {
                info.innerHTML = '<p style="color: #718096; text-align: center;">Nenhum alvo selecionado</p>';
            } else {
                info.innerHTML = `
                    <div class="success-box">
                        <p><strong>‚úì Alvos Selecionados (${selectedTargets.length}/3):</strong></p>
                        <p>${selectedTargets.map(t => targetData[t].icon + ' ' + targetData[t].name).join(', ')}</p>
                    </div>
                `;
            }
        }

        function nextStep() {
            if (validateStep(currentStep)) {
                currentStep++;
                showStep(currentStep);
                updateProgressBar();
                if (currentStep === 2) renderPreparation();
                if (currentStep === 3) renderScripts();
                if (currentStep === 4) renderResults();
                saveData();
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
                updateProgressBar();
            }
        }

        function showStep(step) {
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
            document.getElementById(`step${step}`).classList.add('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function updateProgressBar() {
            const progress = ((currentStep - 1) / 3) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.querySelectorAll('.progress-step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 < currentStep) step.classList.add('completed');
                else if (index + 1 === currentStep) step.classList.add('active');
            });
        }

        function validateStep(step) {
            if (step === 1 && selectedTargets.length === 0) {
                alert('Selecione pelo menos 1 alvo de negocia√ß√£o!');
                return false;
            }
            if (step === 2) {
                let valid = true;
                selectedTargets.forEach(target => {
                    const neg = negotiations[target];
                    // Aceita 0 como valor v√°lido, s√≥ n√£o aceita undefined/null/vazio
                    if (!neg || neg.currentValue === undefined || neg.currentValue === null || neg.currentValue === '' || !neg.timeAsClient) {
                        valid = false;
                    }
                });
                if (!valid) {
                    alert('Preencha as informa√ß√µes de todos os alvos selecionados!');
                    return false;
                }
            }
            return true;
        }

        function renderPreparation() {
            const container = document.getElementById('preparationContainer');
            container.innerHTML = selectedTargets.map(target => {
                const data = targetData[target];
                const saved = negotiations[target] || {};
                return `
                    <div class="negotiation-item">
                        <h3 style="font-size: 1.3em; color: #2d3748; margin-bottom: 20px;">
                            ${data.icon} ${data.name}
                        </h3>
                        
                        <div class="input-group">
                            <label>Valor Atual que Voc√™ Paga (R$/m√™s)</label>
                            <input type="number" value="${saved.currentValue || ''}" min="0" step="10"
                                   onchange="updateNegotiation('${target}', 'currentValue', this.value)">
                        </div>

                        <div class="input-group">
                            <label>H√° Quanto Tempo √â Cliente?</label>
                            <select onchange="updateNegotiation('${target}', 'timeAsClient', this.value)">
                                <option value="">Selecione...</option>
                                <option value="menos de 6 meses" ${saved.timeAsClient === 'menos de 6 meses' ? 'selected' : ''}>Menos de 6 meses</option>
                                <option value="6 meses a 1 ano" ${saved.timeAsClient === '6 meses a 1 ano' ? 'selected' : ''}>6 meses a 1 ano</option>
                                <option value="1 a 2 anos" ${saved.timeAsClient === '1 a 2 anos' ? 'selected' : ''}>1 a 2 anos</option>
                                <option value="2 a 5 anos" ${saved.timeAsClient === '2 a 5 anos' ? 'selected' : ''}>2 a 5 anos</option>
                                <option value="mais de 5 anos" ${saved.timeAsClient === 'mais de 5 anos' ? 'selected' : ''}>Mais de 5 anos</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label>Empresa/Fornecedor Concorrente</label>
                            <input type="text" value="${saved.competitor || ''}"
                                   placeholder="Ex: Banco Inter, Claro, Porto Seguro..."
                                   onchange="updateNegotiation('${target}', 'competitor', this.value)">
                        </div>

                        <div class="input-group">
                            <label>Valor da Oferta Concorrente (R$/m√™s)</label>
                            <input type="number" value="${saved.competitorValue !== undefined ? saved.competitorValue : ''}" min="0" step="0.01"
                                   placeholder="Pesquise em sites comparadores (pode ser R$ 0,00)"
                                   onchange="updateNegotiation('${target}', 'competitorValue', this.value)">
                            <small style="color: #718096; font-size: 0.85em; margin-top: 5px; display: block;">üí° Pode ser R$ 0,00 se a concorr√™ncia oferecer isen√ß√£o</small>
                        </div>

                        ${saved.currentValue !== undefined && saved.competitorValue !== undefined ? `
                            <div class="tip-box">
                                <p><strong>üí° Potencial de Economia:</strong></p>
                                <p>Diferen√ßa: R$ ${(saved.currentValue - saved.competitorValue).toFixed(2)}/m√™s</p>
                                <p>Anual: R$ ${((saved.currentValue - saved.competitorValue) * 12).toFixed(2)}</p>
                                ${saved.competitorValue === 0 ? '<p style="color: #059669; font-weight: 600; margin-top: 8px;">‚úÖ Concorrente oferece ISEN√á√ÉO total!</p>' : ''}
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }

        function updateNegotiation(target, field, value) {
            if (!negotiations[target]) negotiations[target] = {};
            
            // Para campos num√©ricos, converter para n√∫mero (aceita 0)
            if (field.includes('Value')) {
                negotiations[target][field] = value === '' ? undefined : parseFloat(value);
            } else {
                negotiations[target][field] = value;
            }
            
            saveData();
            renderPreparation();
        }

        function renderScripts() {
            const container = document.getElementById('scriptsContainer');
            container.innerHTML = selectedTargets.map(target => {
                const data = targetData[target];
                const neg = negotiations[target];
                
                let script = data.script;
                script = script.replace('[TEMPO]', neg.timeAsClient || '[SEU_TEMPO]');
                script = script.replace('[VALOR_ATUAL]', neg.currentValue || '[VALOR_ATUAL]');
                script = script.replace('[VALOR_CONCORRENTE]', neg.competitorValue || '[VALOR_CONCORRENTE]');
                script = script.replace('[BANCO_CONCORRENTE]', neg.competitor || '[CONCORRENTE]');
                script = script.replace('[OPERADORA_CONCORRENTE]', neg.competitor || '[CONCORRENTE]');
                script = script.replace('[SEGURADORA_CONCORRENTE]', neg.competitor || '[CONCORRENTE]');
                script = script.replace('[ACADEMIA_CONCORRENTE]', neg.competitor || '[CONCORRENTE]');

                return `
                    <div class="script-box">
                        <div class="script-title">${data.icon} ${data.name}</div>
                        <div class="script-content">
                            <button class="copy-button" onclick="copyScript('script-${target}')">üìã Copiar</button>
                            <div id="script-${target}">${script}</div>
                        </div>
                        <div class="tip-box">
                            <p><strong>üí° Dica:</strong> ${data.tips}</p>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function copyScript(id) {
            const text = document.getElementById(id).textContent;
            navigator.clipboard.writeText(text).then(() => {
                alert('‚úÖ Script copiado! Cole no chat ou anote para a liga√ß√£o.');
            });
        }

        function renderResults() {
            const container = document.getElementById('resultsContainer');
            container.innerHTML = selectedTargets.map(target => {
                const data = targetData[target];
                const neg = negotiations[target];
                return `
                    <div class="negotiation-item">
                        <h3 style="font-size: 1.3em; color: #2d3748; margin-bottom: 20px;">
                            ${data.icon} ${data.name}
                        </h3>

                        <div class="input-group">
                            <label>Conseguiu Negociar?</label>
                            <select onchange="updateNegotiation('${target}', 'success', this.value)">
                                <option value="">Selecione...</option>
                                <option value="sim" ${neg.success === 'sim' ? 'selected' : ''}>‚úÖ Sim, consegui desconto</option>
                                <option value="nao" ${neg.success === 'nao' ? 'selected' : ''}>‚ùå N√£o consegui</option>
                                <option value="aguardando" ${neg.success === 'aguardando' ? 'selected' : ''}>‚è≥ Ainda vou negociar</option>
                            </select>
                        </div>

                        ${neg.success === 'sim' ? `
                            <div class="input-group">
                                <label>Novo Valor Negociado (R$/m√™s)</label>
                                <input type="number" value="${neg.newValue || ''}" min="0" step="10"
                                       onchange="updateNegotiation('${target}', 'newValue', this.value)">
                            </div>

                            <div class="input-group">
                                <label>Nome do Atendente / Protocolo (opcional)</label>
                                <input type="text" value="${neg.protocol || ''}"
                                       placeholder="Para refer√™ncia futura..."
                                       onchange="updateNegotiation('${target}', 'protocol', this.value)">
                            </div>

                            ${neg.currentValue && neg.newValue ? `
                                <div class="success-box">
                                    <p><strong>üéâ Parab√©ns! Voc√™ economizou:</strong></p>
                                    <p>üí∞ <strong>R$ ${(neg.currentValue - neg.newValue).toFixed(2)}/m√™s</strong></p>
                                    <p>üìÖ <strong>R$ ${((neg.currentValue - neg.newValue) * 12).toFixed(2)}/ano</strong></p>
                                    <p>üéØ Percentual: <strong>${(((neg.currentValue - neg.newValue) / neg.currentValue) * 100).toFixed(1)}%</strong></p>
                                </div>
                            ` : ''}
                        ` : ''}

                        ${neg.success === 'nao' ? `
                            <div class="warning-box">
                                <p><strong>üí° Dica:</strong> Tente novamente em 15 dias ou fale direto com o setor de reten√ß√£o!</p>
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');

            calculateTotalSavings();
        }

        function calculateTotalSavings() {
            let totalMonthly = 0;
            let successCount = 0;

            selectedTargets.forEach(target => {
                const neg = negotiations[target];
                if (neg && neg.success === 'sim' && neg.currentValue && neg.newValue) {
                    totalMonthly += (neg.currentValue - neg.newValue);
                    successCount++;
                }
            });

            const totalYearly = totalMonthly * 12;

            const container = document.getElementById('totalSavings');
            if (successCount > 0) {
                container.innerHTML = `
                    <div class="savings-summary">
                        <div class="summary-title">üéâ Economia Total das Negocia√ß√µes</div>
                        <div class="summary-value">R$ ${totalMonthly.toFixed(2)}</div>
                        <div style="font-size: 1.2em; color: #065f46; margin-top: 10px;">Por m√™s</div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 25px;">
                            <div style="background: white; padding: 15px; border-radius: 10px;">
                                <div style="color: #065f46;">Economia Anual</div>
                                <div style="font-size: 1.8em; font-weight: 700; color: #059669;">R$ ${totalYearly.toFixed(2)}</div>
                            </div>
                            <div style="background: white; padding: 15px; border-radius: 10px;">
                                <div style="color: #065f46;">Negocia√ß√µes</div>
                                <div style="font-size: 1.8em; font-weight: 700; color: #059669;">${successCount}/${selectedTargets.length}</div>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        function showPrintView() {
            let totalMonthly = 0;
            let successCount = 0;

            selectedTargets.forEach(target => {
                const neg = negotiations[target];
                if (neg && neg.success === 'sim' && neg.currentValue && neg.newValue) {
                    totalMonthly += (neg.currentValue - neg.newValue);
                    successCount++;
                }
            });

            const totalYearly = totalMonthly * 12;

            const html = `
                <div class="print-header">
                    <h1 style="font-size: 2.5em;">üí∞ Relat√≥rio de Negocia√ß√µes</h1>
                    <p style="font-size: 1.2em;">Revolu√ß√£o Financeira em 30 Dias</p>
                    <p style="font-size: 0.9em; opacity: 0.8; margin-top: 10px;">${new Date().toLocaleDateString('pt-BR')}</p>
                </div>

                ${successCount > 0 ? `
                    <div style="background: linear-gradient(135deg, #d1fae5, #a7f3d0); padding: 30px; border-radius: 12px; border: 3px solid #10b981; text-align: center; margin-bottom: 30px;">
                        <h2 style="color: #065f46; margin-bottom: 20px;">üéâ Economia Total</h2>
                        <p style="font-size: 3.5em; font-weight: 700; color: #059669;">R$ ${totalMonthly.toFixed(2)}</p>
                        <p style="color: #065f46; margin-top: 10px;">Por m√™s</p>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                            <div style="background: white; padding: 15px; border-radius: 10px;">
                                <p style="color: #065f46;">Anual</p>
                                <p style="font-size: 1.8em; font-weight: 700; color: #059669;">R$ ${totalYearly.toFixed(2)}</p>
                            </div>
                            <div style="background: white; padding: 15px; border-radius: 10px;">
                                <p style="color: #065f46;">Sucesso</p>
                                <p style="font-size: 1.8em; font-weight: 700; color: #059669;">${successCount}/${selectedTargets.length}</p>
                            </div>
                        </div>
                    </div>
                ` : ''}

                <div style="background: #f8f9fa; padding: 30px; border-radius: 12px; margin-bottom: 30px;">
                    <h2 style="color: #667eea; margin-bottom: 20px;">üìã Detalhamento das Negocia√ß√µes</h2>
                    
                    ${selectedTargets.map((target, i) => {
                        const data = targetData[target];
                        const neg = negotiations[target];
                        const savings = neg.currentValue && neg.newValue ? neg.currentValue - neg.newValue : 0;
                        
                        return `
                            <div style="background: white; padding: 25px; border-radius: 12px; margin-bottom: 20px; border-left: 5px solid ${neg.success === 'sim' ? '#10b981' : '#cbd5e0'};">
                                <h3 style="color: #2d3748; margin-bottom: 15px;">#${i+1} - ${data.icon} ${data.name}</h3>
                                <p style="color: #4a5568; margin: 8px 0;"><strong>Valor Anterior:</strong> R$ ${neg.currentValue?.toFixed(2) || '-'}/m√™s</p>
                                <p style="color: #4a5568; margin: 8px 0;"><strong>Concorrente Pesquisado:</strong> ${neg.competitor || '-'}</p>
                                ${neg.success === 'sim' ? `
                                    <p style="color: #10b981; margin: 8px 0; font-size: 1.1em;"><strong>‚úÖ Novo Valor:</strong> R$ ${neg.newValue?.toFixed(2)}/m√™s</p>
                                    <p style="color: #10b981; margin: 8px 0;"><strong>Economia:</strong> R$ ${savings.toFixed(2)}/m√™s (${((savings / neg.currentValue) * 100).toFixed(1)}%)</p>
                                    ${neg.protocol ? `<p style="color: #4a5568; margin: 8px 0;"><strong>Protocolo:</strong> ${neg.protocol}</p>` : ''}
                                ` : neg.success === 'nao' ? `
                                    <p style="color: #ef4444; margin: 8px 0;"><strong>‚ùå N√£o conseguiu desconto</strong></p>
                                ` : `
                                    <p style="color: #f59e0b; margin: 8px 0;"><strong>‚è≥ Aguardando negocia√ß√£o</strong></p>
                                `}
                            </div>
                        `;
                    }).join('')}
                </div>

                <div style="text-align: center; margin-top: 40px; padding-top: 30px; border-top: 2px solid #e9ecef; color: #718096;">
                    <p style="font-size: 1.1em; margin-bottom: 15px;"><strong>üí™ Continue negociando!</strong></p>
                    <p style="margin-bottom: 10px;">Cada real economizado √© um real direcionado aos seus sonhos.</p>
                    <p style="font-size: 0.9em; margin-top: 20px; color: #667eea;"><strong>Revolu√ß√£o Financeira em 30 Dias</strong></p>
                    <p style="font-size: 0.85em; color: #667eea;">Fernando Martins</p>
                    <p style="font-size: 0.85em; color: #667eea;">Consultor Financeiro</p>
                </div>
            `;

            document.getElementById('printContent').innerHTML = html;
            document.getElementById('printView').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closePrintView() {
            document.getElementById('printView').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function printReport() {
            window.print();
        }

        function saveData() {
            localStorage.setItem('negotiations', JSON.stringify({ selectedTargets, negotiations }));
        }

        function loadData() {
            const saved = localStorage.getItem('negotiations');
            if (saved) {
                const data = JSON.parse(saved);
                selectedTargets = data.selectedTargets || [];
                negotiations = data.negotiations || {};
                updateTargetUI();
                updateSelectedInfo();
            }
        }

        function restart() {
            if (confirm('Iniciar nova rodada de negocia√ß√µes? Os dados atuais ser√£o perdidos.')) {
                localStorage.removeItem('negotiations');
                location.reload();
            }
        }
    </script>
</body>
</html>
