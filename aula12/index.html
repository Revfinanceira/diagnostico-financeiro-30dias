<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aula 12: Avalia√ß√£o e Celebra√ß√£o - Revolu√ß√£o Financeira em 30 Dias</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.95;
        }

        .progress-container {
            background: #f8f9fa;
            padding: 20px 40px;
            border-bottom: 2px solid #e9ecef;
        }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin-bottom: 10px;
        }

        .progress-line {
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 4px;
            background: #e9ecef;
            z-index: 1;
        }

        .progress-line-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
            width: 0%;
        }

        .progress-step {
            position: relative;
            z-index: 2;
            text-align: center;
            flex: 1;
        }

        .progress-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            border: 4px solid #e9ecef;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #adb5bd;
            transition: all 0.3s ease;
        }

        .progress-step.active .progress-circle {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: scale(1.1);
        }

        .progress-step.completed .progress-circle {
            border-color: #28a745;
            background: #28a745;
            color: white;
        }

        .progress-label {
            font-size: 0.85em;
            color: #6c757d;
            font-weight: 500;
        }

        .progress-step.active .progress-label {
            color: #667eea;
            font-weight: 600;
        }

        .content {
            padding: 40px;
        }

        .step {
            display: none;
        }

        .step.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .step-title {
            font-size: 2em;
            color: #2d3748;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .step-description {
            color: #718096;
            margin-bottom: 30px;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 1.3em;
            color: #667eea;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .info-box {
            background: #e0e7ff;
            border-left: 4px solid #667eea;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .info-box p {
            color: #4c51bf;
            margin: 5px 0;
            line-height: 1.6;
        }

        .success-box {
            background: #d1fae5;
            border-left: 4px solid #10b981;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .success-box p {
            color: #065f46;
            margin: 5px 0;
            line-height: 1.6;
        }

        .celebration-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 4px solid #f59e0b;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            text-align: center;
        }

        .celebration-box h3 {
            color: #92400e;
            font-size: 1.8em;
            margin-bottom: 15px;
        }

        .celebration-box p {
            color: #92400e;
            margin: 10px 0;
            font-size: 1.1em;
            line-height: 1.6;
        }

        input[type="text"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #4a5568;
            font-weight: 600;
            font-size: 0.95em;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .slider-container {
            margin: 20px 0;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #e2e8f0;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: pointer;
        }

        .slider-value {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.9em;
            color: #718096;
        }

        .slider-current {
            font-weight: 700;
            color: #667eea;
            font-size: 1.5em;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 15px;
        }

        .nav-button {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
        }

        .nav-button.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .nav-button.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .nav-button.secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .nav-button.secondary:hover {
            background: #f0f4ff;
        }

        .result-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 5px solid #667eea;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .result-title {
            font-size: 1.2em;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 15px;
        }

        .result-value {
            font-size: 2.5em;
            font-weight: 700;
            color: #10b981;
            margin: 15px 0;
        }

        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid #e2e8f0;
        }

        .metric-label {
            font-size: 0.9em;
            color: #718096;
            margin-bottom: 10px;
        }

        .metric-value {
            font-size: 2em;
            font-weight: 700;
            color: #667eea;
        }

        .indice-transformacao {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            border: 3px solid #10b981;
            text-align: center;
        }

        .indice-title {
            font-size: 1.8em;
            color: #065f46;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .indice-value {
            font-size: 4em;
            font-weight: 700;
            color: #10b981;
            margin: 20px 0;
        }

        .indice-subtitle {
            color: #059669;
            font-size: 1.2em;
        }

        .print-view {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            z-index: 9999;
            overflow-y: auto;
            padding: 40px;
        }

        .print-view.active {
            display: block !important;
        }

        .print-content {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        .print-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .print-buttons {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 10000;
        }
        
        .print-view:not(.active) .print-buttons {
            display: none;
        }
        
        .print-view.active .print-buttons {
            display: flex !important;
        }

        .print-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .print-btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .print-btn-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }

        .print-btn-secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .print-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .action-buttons button {
            flex: 1;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            .metric-grid {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéâ Aula 12: Avalia√ß√£o e Celebra√ß√£o</h1>
            <p>Me√ßa seus resultados e planeje os pr√≥ximos 60 dias</p>
        </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-line">
                    <div class="progress-line-fill" id="progressFill"></div>
                </div>
                <div class="progress-step active" data-step="1">
                    <div class="progress-circle">1</div>
                    <div class="progress-label">Sist√™mica</div>
                </div>
                <div class="progress-step" data-step="2">
                    <div class="progress-circle">2</div>
                    <div class="progress-label">Resultados</div>
                </div>
                <div class="progress-step" data-step="3">
                    <div class="progress-circle">3</div>
                    <div class="progress-label">Comportamental</div>
                </div>
                <div class="progress-step" data-step="4">
                    <div class="progress-circle">4</div>
                    <div class="progress-label">Plano 60 Dias</div>
                </div>
                <div class="progress-step" data-step="5">
                    <div class="progress-circle">5</div>
                    <div class="progress-label">Celebra√ß√£o</div>
                </div>
            </div>
        </div>

        <div class="content">
            <!-- PASSO 1: TRANSFORMA√á√ÉO SIST√äMICA -->
            <div class="step active" id="step1">
                <h2 class="step-title">üìä Passo 1: Transforma√ß√£o Sist√™mica</h2>
                <p class="step-description">Avalie a estrutura financeira que voc√™ construiu nos √∫ltimos 30 dias.</p>

                <div class="info-box">
                    <p><strong>üí° Por que isso importa:</strong></p>
                    <p>‚Ä¢ Transforma√ß√£o sist√™mica tem <strong>3,7x mais impacto</strong> que aumento de renda</p>
                    <p>‚Ä¢ <strong>87%</strong> das pessoas que completam a estrutura mant√™m o sistema por 6+ meses</p>
                </div>

                <div class="section">
                    <div class="section-title">Sistema de 3 Contas</div>
                    <div class="input-group">
                        <label>Qual o percentual de conclus√£o do seu Sistema de 3 Contas?</label>
                        <div class="slider-container">
                            <input type="range" min="0" max="100" value="0" class="slider" id="sistemaContas" oninput="updateSlider('sistemaContas')">
                            <div class="slider-value">
                                <span>0%</span>
                                <span class="slider-current" id="sistemaContasValue">0%</span>
                                <span>100%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">Automa√ß√µes Configuradas</div>
                    <div class="input-group">
                        <label>Quantas transfer√™ncias/pagamentos voc√™ automatizou?</label>
                        <input type="number" id="automacoes" min="0" placeholder="Ex: 5" onchange="saveData()">
                        <small style="color: #718096; display: block; margin-top: 5px;">
                            Inclua: transfer√™ncias entre contas, pagamentos de contas, investimentos autom√°ticos
                        </small>
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">Clareza de Prop√≥sito</div>
                    <div class="input-group">
                        <label>Qu√£o claro est√° seu Mapa de Prop√≥sito? (1-10)</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="10" value="5" class="slider" id="clarezaProp" oninput="updateSlider('clarezaProp')">
                            <div class="slider-value">
                                <span>Vago</span>
                                <span class="slider-current" id="clarezaPropValue">5</span>
                                <span>Cristalino</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="navigation">
                    <button class="nav-button primary" onclick="nextStep()">
                        Pr√≥ximo: Resultados Concretos ‚Üí
                    </button>
                </div>
            </div>

            <!-- PASSO 2: RESULTADOS CONCRETOS -->
            <div class="step" id="step2">
                <h2 class="step-title">üí∞ Passo 2: Resultados Concretos</h2>
                <p class="step-description">Quantifique os ganhos tang√≠veis que voc√™ obteve.</p>

                <div class="info-box">
                    <p><strong>üí° Impacto dos n√∫meros:</strong></p>
                    <p>Associar valores exatos √†s estrat√©gias aumenta em <strong>58%</strong> a chance de continuidade</p>
                </div>

                <div class="section">
                    <div class="section-title">üí∏ Economia por Micro-Cortes</div>
                    <div class="input-group">
                        <label>Quanto voc√™ economiza por m√™s com os micro-cortes? (R$)</label>
                        <input type="number" id="economiaMicroCortes" min="0" step="10" placeholder="0" onchange="saveData()">
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">ü§ù Ganhos por Renegocia√ß√µes</div>
                    <div class="input-group">
                        <label>Quanto voc√™ economiza por m√™s ap√≥s renegocia√ß√µes? (R$)</label>
                        <input type="number" id="economiaReneg" min="0" step="10" placeholder="0" onchange="saveData()">
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">üíº Segunda Fonte de Renda</div>
                    <div class="input-group">
                        <label>Qual a receita mensal da sua segunda fonte? (R$)</label>
                        <input type="number" id="segundaFonte" min="0" step="10" placeholder="0" onchange="saveData()">
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">üõ°Ô∏è Reserva de Emerg√™ncia</div>
                    <div class="input-group">
                        <label>Quantos meses de despesas voc√™ tem guardado?</label>
                        <input type="number" id="mesesReserva" min="0" max="24" step="0.5" placeholder="0" onchange="saveData()">
                    </div>
                </div>

                <div id="totalGanhos"></div>

                <div class="navigation">
                    <button class="nav-button secondary" onclick="prevStep()">
                        ‚Üê Voltar
                    </button>
                    <button class="nav-button primary" onclick="nextStep()">
                        Pr√≥ximo: Transforma√ß√£o Comportamental ‚Üí
                    </button>
                </div>
            </div>

            <!-- PASSO 3: TRANSFORMA√á√ÉO COMPORTAMENTAL -->
            <div class="step" id="step3">
                <h2 class="step-title">üß† Passo 3: Transforma√ß√£o Comportamental</h2>
                <p class="step-description">Avalie as mudan√ßas de mentalidade e comportamento.</p>

                <div class="info-box">
                    <p><strong>üí° O que mais importa:</strong></p>
                    <p>Transforma√ß√µes comportamentais s√£o <strong>2,8x mais preditivas</strong> de sucesso que conhecimento t√©cnico</p>
                </div>

                <div class="section">
                    <div class="section-title">Redu√ß√£o de Estresse Financeiro</div>
                    <div class="input-group">
                        <label>ANTES: Quanto estresse voc√™ sentia ao pensar em dinheiro? (1-10)</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="10" value="7" class="slider" id="estresseAntes" oninput="updateSlider('estresseAntes')">
                            <div class="slider-value">
                                <span>Tranquilo</span>
                                <span class="slider-current" id="estresseAntesValue">7</span>
                                <span>Muito Estresse</span>
                            </div>
                        </div>
                    </div>
                    <div class="input-group">
                        <label>AGORA: Quanto estresse voc√™ sente ao pensar em dinheiro? (1-10)</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="10" value="5" class="slider" id="estresseDepois" oninput="updateSlider('estresseDepois')">
                            <div class="slider-value">
                                <span>Tranquilo</span>
                                <span class="slider-current" id="estresseDepoisValue">5</span>
                                <span>Muito Estresse</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">Compras Impulsivas</div>
                    <div class="input-group">
                        <label>ANTES: Quantas compras impulsivas voc√™ fazia por m√™s?</label>
                        <input type="number" id="comprasAntes" min="0" placeholder="Ex: 10" onchange="saveData()">
                    </div>
                    <div class="input-group">
                        <label>AGORA: Quantas compras impulsivas voc√™ faz por m√™s?</label>
                        <input type="number" id="comprasDepois" min="0" placeholder="Ex: 3" onchange="saveData()">
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">Tranquilidade Financeira</div>
                    <div class="input-group">
                        <label>Qual seu n√≠vel atual de tranquilidade financeira? (1-10)</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="10" value="5" class="slider" id="tranquilidade" oninput="updateSlider('tranquilidade')">
                            <div class="slider-value">
                                <span>Ansioso</span>
                                <span class="slider-current" id="tranquilidadeValue">5</span>
                                <span>Tranquilo</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="navigation">
                    <button class="nav-button secondary" onclick="prevStep()">
                        ‚Üê Voltar
                    </button>
                    <button class="nav-button primary" onclick="nextStep()">
                        Pr√≥ximo: Plano de 60 Dias ‚Üí
                    </button>
                </div>
            </div>

            <!-- PASSO 4: PLANO DE 60 DIAS -->
            <div class="step" id="step4">
                <h2 class="step-title">üéØ Passo 4: Seu Plano de 60 Dias</h2>
                <p class="step-description">Defina suas prioridades para os pr√≥ximos 2 meses.</p>

                <div class="info-box">
                    <p><strong>üí° Planejamento estruturado:</strong></p>
                    <p>Planos de 60 dias determinam em <strong>87%</strong> dos casos se o sistema ser√° mantido</p>
                </div>

                <div class="section">
                    <div class="section-title">3 Prioridades de Consolida√ß√£o</div>
                    <div class="input-group">
                        <label>Prioridade 1:</label>
                        <input type="text" id="prioridade1" placeholder="Ex: Completar automa√ß√£o do Sistema de 3 Contas" onchange="saveData()">
                    </div>
                    <div class="input-group">
                        <label>Prioridade 2:</label>
                        <input type="text" id="prioridade2" placeholder="Ex: Aumentar reserva de emerg√™ncia para 3 meses" onchange="saveData()">
                    </div>
                    <div class="input-group">
                        <label>Prioridade 3:</label>
                        <input type="text" id="prioridade3" placeholder="Ex: Escalar segunda fonte de renda" onchange="saveData()">
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">Marco de Verifica√ß√£o</div>
                    <div class="input-group">
                        <label>Data do primeiro marco (revis√£o de 30 dias):</label>
                        <input type="date" id="dataMarco" onchange="saveData()">
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">Depoimento</div>
                    <div class="input-group">
                        <label>Qual foi sua MAIOR conquista nos √∫ltimos 30 dias?</label>
                        <textarea id="maiorConquista" placeholder="Descreva sua principal conquista..." onchange="saveData()"></textarea>
                    </div>
                    <div class="input-group">
                        <label>Qual foi seu MAIOR aprendizado?</label>
                        <textarea id="maiorAprendizado" placeholder="O que voc√™ aprendeu de mais importante..." onchange="saveData()"></textarea>
                    </div>
                    <div class="input-group">
                        <label>O que voc√™ diria para algu√©m come√ßando AGORA?</label>
                        <textarea id="conselho" placeholder="Seu conselho para quem est√° come√ßando..." onchange="saveData()"></textarea>
                    </div>
                </div>

                <div class="navigation">
                    <button class="nav-button secondary" onclick="prevStep()">
                        ‚Üê Voltar
                    </button>
                    <button class="nav-button primary" onclick="calculateResults()">
                        Ver Meus Resultados! üéâ
                    </button>
                </div>
            </div>

            <!-- PASSO 5: CELEBRA√á√ÉO E RESULTADOS -->
            <div class="step" id="step5">
                <h2 class="step-title">üéâ Passo 5: Celebra√ß√£o dos Resultados!</h2>
                <p class="step-description">Veja o resumo completo da sua transforma√ß√£o financeira!</p>

                <div class="celebration-box">
                    <h3>üéä PARAB√âNS PELA SUA JORNADA! üéä</h3>
                    <p>Voc√™ completou os 30 dias da Revolu√ß√£o Financeira!</p>
                    <p>Veja abaixo os resultados da sua transforma√ß√£o:</p>
                </div>

                <div class="indice-transformacao" id="indiceContainer"></div>

                <div id="resultadosDetalhados"></div>

                <div class="success-box">
                    <p><strong>üéØ Pr√≥ximos Passos:</strong></p>
                    <p>‚úÖ Baixe seu relat√≥rio completo</p>
                    <p>‚úÖ Compartilhe seus resultados comigo (opcional)</p>
                    <p>‚úÖ Continue implementando seu plano de 60 dias</p>
                    <p>‚úÖ Celebre cada marco alcan√ßado!</p>
                </div>

                <div class="action-buttons">
                    <button class="nav-button primary" onclick="showPrintView()">
                        üñºÔ∏è Baixar Meu Relat√≥rio
                    </button>
                    <button class="nav-button primary" onclick="sendToGoogleForms()" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                        üìä Compartilhar Resultados
                    </button>
                </div>

                <div class="navigation" style="margin-top: 30px;">
                    <button class="nav-button secondary" onclick="restart()">
                        üîÑ Nova Avalia√ß√£o
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Visualiza√ß√£o para Impress√£o -->
    <div class="print-view" id="printView">
        <div class="print-buttons">
            <button class="print-btn print-btn-primary" onclick="downloadImage()">
                üñºÔ∏è Baixar Relat√≥rio
            </button>
            <button class="print-btn print-btn-secondary" onclick="closePrintView()">‚úï Fechar</button>
        </div>
        <div class="print-content" id="printContent"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        let currentStep = 1;
        let data = {
            // Sist√™mica
            sistemaContas: 0,
            automacoes: 0,
            clarezaProp: 5,
            // Resultados
            economiaMicroCortes: 0,
            economiaReneg: 0,
            segundaFonte: 0,
            mesesReserva: 0,
            // Comportamental
            estresseAntes: 7,
            estresseDepois: 5,
            comprasAntes: 0,
            comprasDepois: 0,
            tranquilidade: 5,
            // Plano 60 dias
            prioridade1: '',
            prioridade2: '',
            prioridade3: '',
            dataMarco: '',
            maiorConquista: '',
            maiorAprendizado: '',
            conselho: ''
        };

        function formatCurrency(value) {
            return new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL',
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(value);
        }

        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            updateProgressBar();
            updateSlider('sistemaContas');
            updateSlider('clarezaProp');
            updateSlider('estresseAntes');
            updateSlider('estresseDepois');
            updateSlider('tranquilidade');
        });

        function updateSlider(id) {
            const slider = document.getElementById(id);
            const display = document.getElementById(id + 'Value');
            const value = slider.value;
            
            if (id === 'sistemaContas') {
                display.textContent = value + '%';
                data.sistemaContas = parseInt(value);
            } else if (id.includes('estresse')) {
                display.textContent = value;
                data[id] = parseInt(value);
            } else {
                display.textContent = value;
                data[id] = parseInt(value);
            }
            
            saveData();
        }

        function nextStep() {
            if (validateStep(currentStep)) {
                currentStep++;
                showStep(currentStep);
                updateProgressBar();
                
                // Calcula totais no passo 2
                if (currentStep === 2) {
                    updateTotalGanhos();
                }
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
                updateProgressBar();
            }
        }

        function showStep(step) {
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
            document.getElementById(`step${step}`).classList.add('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function updateProgressBar() {
            const progress = ((currentStep - 1) / 4) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            document.querySelectorAll('.progress-step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 < currentStep) step.classList.add('completed');
                else if (index + 1 === currentStep) step.classList.add('active');
            });
        }

        function validateStep(step) {
            // Valida√ß√µes b√°sicas se necess√°rio
            return true;
        }

        function updateTotalGanhos() {
            const micro = parseFloat(document.getElementById('economiaMicroCortes').value) || 0;
            const reneg = parseFloat(document.getElementById('economiaReneg').value) || 0;
            const segunda = parseFloat(document.getElementById('segundaFonte').value) || 0;
            
            const total = micro + reneg + segunda;
            const anual = total * 12;
            
            const container = document.getElementById('totalGanhos');
            if (total > 0) {
                container.innerHTML = `
                    <div class="result-card" style="border-left-color: #10b981;">
                        <div class="result-title">üí∞ Ganho Total Mensal</div>
                        <div class="result-value">${formatCurrency(total)}</div>
                        <p style="color: #718096; text-align: center;">
                            ${formatCurrency(anual)} por ano
                        </p>
                    </div>
                `;
            }
        }

        function calculateResults() {
            // Coleta todos os dados dos inputs
            data.automacoes = parseInt(document.getElementById('automacoes').value) || 0;
            data.economiaMicroCortes = parseFloat(document.getElementById('economiaMicroCortes').value) || 0;
            data.economiaReneg = parseFloat(document.getElementById('economiaReneg').value) || 0;
            data.segundaFonte = parseFloat(document.getElementById('segundaFonte').value) || 0;
            data.mesesReserva = parseFloat(document.getElementById('mesesReserva').value) || 0;
            data.comprasAntes = parseInt(document.getElementById('comprasAntes').value) || 0;
            data.comprasDepois = parseInt(document.getElementById('comprasDepois').value) || 0;
            data.prioridade1 = document.getElementById('prioridade1').value;
            data.prioridade2 = document.getElementById('prioridade2').value;
            data.prioridade3 = document.getElementById('prioridade3').value;
            data.dataMarco = document.getElementById('dataMarco').value;
            data.maiorConquista = document.getElementById('maiorConquista').value;
            data.maiorAprendizado = document.getElementById('maiorAprendizado').value;
            data.conselho = document.getElementById('conselho').value;
            
            // Calcula √≠ndice de transforma√ß√£o
            const indice = calculateIndiceTransformacao();
            
            // Renderiza resultados
            renderResultados(indice);
            
            // Vai para o passo 5
            currentStep = 5;
            showStep(5);
            updateProgressBar();
            
            saveData();
        }

        function calculateIndiceTransformacao() {
            // Componentes do √≠ndice (0-100 cada)
            const estrutura = data.sistemaContas; // j√° est√° 0-100
            const automacao = Math.min(100, (data.automacoes / 10) * 100); // 10 automa√ß√µes = 100%
            const economia = Math.min(100, ((data.economiaMicroCortes + data.economiaReneg) / 1000) * 100); // R$1000 = 100%
            const protecao = Math.min(100, (data.mesesReserva / 6) * 100); // 6 meses = 100%
            const comportamento = ((10 - (data.estresseDepois - 1)) / 9) * 100; // escala invertida
            
            // M√©dia ponderada
            const indice = (estrutura * 0.25 + automacao * 0.2 + economia * 0.2 + protecao * 0.2 + comportamento * 0.15);
            
            return Math.round(indice);
        }

        function renderResultados(indice) {
            // √çndice de Transforma√ß√£o
            let nivelTransformacao = '';
            let corNivel = '';
            if (indice >= 80) {
                nivelTransformacao = 'EXCELENTE';
                corNivel = '#10b981';
            } else if (indice >= 60) {
                nivelTransformacao = 'MUITO BOM';
                corNivel = '#3b82f6';
            } else if (indice >= 40) {
                nivelTransformacao = 'BOM';
                corNivel = '#f59e0b';
            } else {
                nivelTransformacao = 'EM DESENVOLVIMENTO';
                corNivel = '#ef4444';
            }
            
            document.getElementById('indiceContainer').innerHTML = `
                <div class="indice-title">üéØ √çndice de Transforma√ß√£o Financeira</div>
                <div class="indice-value" style="color: ${corNivel};">${indice}</div>
                <div class="indice-subtitle">${nivelTransformacao}</div>
            `;
            
            // Detalhamento
            const totalMensal = data.economiaMicroCortes + data.economiaReneg + data.segundaFonte;
            const totalAnual = totalMensal * 12;
            const reducaoEstresse = data.estresseAntes - data.estresseDepois;
            const reducaoCompras = data.comprasAntes > 0 ? 
                Math.round(((data.comprasAntes - data.comprasDepois) / data.comprasAntes) * 100) : 0;
            
            document.getElementById('resultadosDetalhados').innerHTML = `
                <div class="metric-grid">
                    <div class="metric-card">
                        <div class="metric-label">Estrutura</div>
                        <div class="metric-value">${data.sistemaContas}%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Automa√ß√µes</div>
                        <div class="metric-value">${data.automacoes}</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Ganho Mensal</div>
                        <div class="metric-value" style="font-size: 1.3em;">${formatCurrency(totalMensal)}</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Reserva</div>
                        <div class="metric-value">${data.mesesReserva} meses</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Redu√ß√£o Estresse</div>
                        <div class="metric-value">${reducaoEstresse > 0 ? '-' : ''}${Math.abs(reducaoEstresse)} pts</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Menos Compras</div>
                        <div class="metric-value">${reducaoCompras}%</div>
                    </div>
                </div>
            `;
        }

        function showPrintView() {
            const indice = calculateIndiceTransformacao();
            const totalMensal = data.economiaMicroCortes + data.economiaReneg + data.segundaFonte;
            const totalAnual = totalMensal * 12;
            const reducaoEstresse = data.estresseAntes - data.estresseDepois;
            
            const html = `
                <div class="print-header">
                    <h1 style="font-size: 2.5em;">üéâ Avalia√ß√£o de Resultados</h1>
                    <p style="font-size: 1.2em;">Revolu√ß√£o Financeira em 30 Dias</p>
                    <p style="font-size: 0.9em; opacity: 0.8; margin-top: 10px;">${new Date().toLocaleDateString('pt-BR')}</p>
                </div>
                
                <div style="background: linear-gradient(135deg, #d1fae5, #a7f3d0); padding: 30px; border-radius: 12px; border: 3px solid #10b981; text-align: center; margin-bottom: 30px;">
                    <h2 style="color: #065f46; margin-bottom: 15px;">üéØ √çndice de Transforma√ß√£o</h2>
                    <p style="font-size: 4em; font-weight: 700; color: #10b981; margin: 20px 0;">${indice}</p>
                </div>
                
                <div style="background: #f8f9fa; padding: 25px; border-radius: 12px; margin-bottom: 25px;">
                    <h3 style="color: #667eea; margin-bottom: 20px;">üìä Transforma√ß√£o Sist√™mica</h3>
                    <p style="margin: 10px 0;"><strong>Sistema de 3 Contas:</strong> ${data.sistemaContas}%</p>
                    <p style="margin: 10px 0;"><strong>Automa√ß√µes:</strong> ${data.automacoes}</p>
                    <p style="margin: 10px 0;"><strong>Clareza de Prop√≥sito:</strong> ${data.clarezaProp}/10</p>
                </div>
                
                <div style="background: #f8f9fa; padding: 25px; border-radius: 12px; margin-bottom: 25px;">
                    <h3 style="color: #667eea; margin-bottom: 20px;">üí∞ Resultados Financeiros</h3>
                    <p style="margin: 10px 0;"><strong>Economia Micro-Cortes:</strong> ${formatCurrency(data.economiaMicroCortes)}/m√™s</p>
                    <p style="margin: 10px 0;"><strong>Economia Renegocia√ß√µes:</strong> ${formatCurrency(data.economiaReneg)}/m√™s</p>
                    <p style="margin: 10px 0;"><strong>Segunda Fonte:</strong> ${formatCurrency(data.segundaFonte)}/m√™s</p>
                    <p style="margin: 10px 0;"><strong>Reserva:</strong> ${data.mesesReserva} meses</p>
                    <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 15px; text-align: center;">
                        <p style="color: #10b981; font-size: 2em; font-weight: 700;">${formatCurrency(totalMensal)}/m√™s</p>
                        <p style="color: #059669;">${formatCurrency(totalAnual)} por ano</p>
                    </div>
                </div>
                
                <div style="background: #f8f9fa; padding: 25px; border-radius: 12px; margin-bottom: 25px;">
                    <h3 style="color: #667eea; margin-bottom: 20px;">üß† Transforma√ß√£o Comportamental</h3>
                    <p style="margin: 10px 0;"><strong>Redu√ß√£o de Estresse:</strong> ${reducaoEstresse} pontos</p>
                    <p style="margin: 10px 0;"><strong>Compras Impulsivas:</strong> ${data.comprasAntes} ‚Üí ${data.comprasDepois}</p>
                    <p style="margin: 10px 0;"><strong>Tranquilidade Atual:</strong> ${data.tranquilidade}/10</p>
                </div>
                
                <div style="background: #f8f9fa; padding: 25px; border-radius: 12px; margin-bottom: 25px;">
                    <h3 style="color: #667eea; margin-bottom: 20px;">üéØ Plano de 60 Dias</h3>
                    ${data.prioridade1 ? `<p style="margin: 10px 0;">1. ${data.prioridade1}</p>` : ''}
                    ${data.prioridade2 ? `<p style="margin: 10px 0;">2. ${data.prioridade2}</p>` : ''}
                    ${data.prioridade3 ? `<p style="margin: 10px 0;">3. ${data.prioridade3}</p>` : ''}
                    ${data.dataMarco ? `<p style="margin-top: 15px;"><strong>Primeiro Marco:</strong> ${new Date(data.dataMarco + 'T00:00:00').toLocaleDateString('pt-BR')}</p>` : ''}
                </div>
                
                ${data.maiorConquista ? `
                <div style="background: #fef3c7; padding: 25px; border-radius: 12px; margin-bottom: 25px; border-left: 4px solid #f59e0b;">
                    <h3 style="color: #92400e; margin-bottom: 15px;">üèÜ Maior Conquista</h3>
                    <p style="color: #92400e; line-height: 1.6;">${data.maiorConquista}</p>
                </div>
                ` : ''}
                
                <div style="text-align: center; margin-top: 40px; padding-top: 30px; border-top: 2px solid #e9ecef; color: #718096;">
                    <p style="font-size: 1.2em; font-weight: 700; color: #667eea; margin-bottom: 10px;">üéâ PARAB√âNS PELA SUA JORNADA!</p>
                    <p style="font-size: 0.9em; color: #667eea; margin-top: 20px;"><strong>Revolu√ß√£o Financeira em 30 Dias</strong></p>
                    <p style="font-size: 0.85em; color: #667eea;">Fernando Martins - Consultor Financeiro</p>
                </div>
            `;
            
            document.getElementById('printContent').innerHTML = html;
            document.getElementById('printView').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closePrintView() {
            document.getElementById('printView').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function downloadImage() {
            const buttons = document.querySelector('.print-buttons');
            buttons.style.display = 'none';
            
            const printContent = document.getElementById('printContent');
            
            html2canvas(printContent, {
                scale: 2,
                useCORS: true,
                backgroundColor: '#ffffff',
                windowWidth: 800,
                onclone: function(clonedDoc) {
                    const clonedContent = clonedDoc.getElementById('printContent');
                    clonedContent.style.width = '800px';
                }
            }).then(canvas => {
                canvas.toBlob(function(blob) {
                    const url = URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    link.download = 'avaliacao-30-dias-' + new Date().getTime() + '.png';
                    link.href = url;
                    link.click();
                    URL.revokeObjectURL(url);
                    buttons.style.display = 'flex';
                }, 'image/png');
            }).catch(error => {
                console.error('Erro ao gerar imagem:', error);
                alert('Erro ao gerar imagem. Tente novamente.');
                buttons.style.display = 'flex';
            });
        }

        function sendToGoogleForms() {
            // SUBSTITUA ESTE URL PELO SEU GOOGLE FORMS
            const FORM_URL = 'https://docs.google.com/forms/d/e/1FAIpQLScnP7t3O2bkyn2Ag_25X-lsq3B7aVOiq7w1Wa41qyiO0IBOAg/viewform?usp=header';
            
            // Pr√©-preenche os dados (voc√™ precisa configurar os IDs dos campos no Google Forms)
            const params = new URLSearchParams({
                // Estruture conforme os IDs dos campos do seu formul√°rio
                // Exemplo: 'entry.123456': data.sistemaContas
            });
            
            // Abre o formul√°rio em nova aba
            window.open(`${FORM_URL}?${params.toString()}`, '_blank');
            
            alert('üìä Formul√°rio aberto em nova aba! Confirme e envie seus resultados.');
        }

        function saveData() {
            localStorage.setItem('avaliacao30dias', JSON.stringify(data));
        }

        function loadData() {
            const saved = localStorage.getItem('avaliacao30dias');
            if (saved) {
                data = JSON.parse(saved);
                
                // Restaura valores nos inputs
                Object.keys(data).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) {
                        if (element.type === 'range') {
                            element.value = data[key];
                            updateSlider(key);
                        } else {
                            element.value = data[key];
                        }
                    }
                });
            }
        }

        function restart() {
            if (confirm('Criar nova avalia√ß√£o? Os dados atuais ser√£o perdidos.')) {
                localStorage.removeItem('avaliacao30dias');
                location.reload();
            }
        }
    </script>
</body>
</html>
